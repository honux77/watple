
<!DOCTYPE html>
<html lang="ko">
<head>
<% include /partials/head %>
</head>

<body>

  <div class="container">
    <div id="signupbox" style="margin-top:50px" class="mainbox col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">
                <div class="panel panel-info">
                    <div class="panel-heading">
                        <div class="panel-title">회원 가입</div>
                        <div style="float:right; font-size: 85%; position: relative; top:-10px"><a id="signinlink" href="#" onclick="$('#signupbox').hide(); $('#loginbox').show()">로그인</a></div>
                    </div>
                    <div class="panel-body" >
                        <form id="signupform" class="form-horizontal" role="form" action="/signup" method="post">

                          <!-- show any messages that come back with authentication -->
                          <% if (message.length > 0) { %>
                              <div class="alert alert-danger"><%= message %></div>
                          <% } %>

                            <div class="form-group">
                                <label for="email" class="col-md-3 control-label">이메일</label>
                                <div class="col-md-9">
                                    <input id="email" type="text" class="form-control" name="email" placeholder="email">
                                </div>
                                <label for="email" class="col-md-3 control-label">이메일 확인</label>
                                <div class="col-md-9">
                                    <input type="text" class="form-control" name="email2" placeholder="email2">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="firstname" class="col-md-3 control-label">이름</label>
                                <div class="col-md-9">
                                    <input type="text" class="form-control" name="name" placeholder="name">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="password" class="col-md-3 control-label">비밀번호</label>
                                <div class="col-md-9">
                                    <input type="password" class="form-control" name="password" placeholder="password">
                                </div>
                            </div>
                            <div class="form-group">
                                <!-- Button -->
                                <div class="col-md-offset-3 col-md-9">
                                    <button id="btn-signup" type="button" class="btn btn-info" onclick="signup()"><i class="icon-hand-right"></i>회원 가입</button>
                                </div>
                            </div>
                        </form>
                     </div>
                </div>
     </div>
</div>
<script>
function signup() {
  console.log("singup");
  var form = document.getElementById("signupform");
  var email = form.elements["email"].value;
  var email2 = form.elements["email2"].value;

  if (checkEmail(email, email2)) {
    form.submit();
  } else {
    alert('이메일 주소를 확인해 주세요.');
    form.focus;
  }
}

function checkEmail(email, email2) {
  if(email !== email2) {
    console.log(email +"is not equal to" + email2);
    return false;
  }

  var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
  if (!filter.test(email)) {
    return false;
  }
  return true;
}
</script>

  <% include /partials/foot.ejs %>
  </body>
</html>
